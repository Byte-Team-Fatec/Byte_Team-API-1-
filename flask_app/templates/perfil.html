{% extends "base_light.html" %}
{% block head_extras %}
<link rel="stylesheet" href="{{url_for('static', filename = 'perfil.css')}}">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
{% endblock %}

{% block content %}
    <div class="container">
        <div class="left-section">
            <div class="card">
                <!-- A foto do vereador será exibida aqui no card da esquerda -->
                <img src="{{ url_for('static', filename=vereador['id']) }}" alt="{{ vereador['nome'] }}">
                <h1>{{ vereador['nome_civil'] }}</h1>
                <h2>{{ vereador['partido_sigla'] }}</h2>
                <p><strong>Telefone:</strong> {{ vereador['telefone'] }}</p>
                <p class="email" id="email"><strong>E-mail:</strong> {{ vereador['email'] }}</p>
                <p><strong>Nº do Gabinete:</strong> {{ vereador['gabinete'] or 'Informação não disponível' }}</p>
            </div>
            <button class="comment-btn">ADICIONE UM COMENTÁRIO...</button>
        </div>

        <div class="right-section">
            <div id="filtro">
                <input type="text" id="btnBusca" placeholder="FILTRAR...">
                <!-- Aqui o ícone de filtro é exibido corretamente -->
                <img src="{{ url_for('static', filename='imagens/imagensperfil/Filter.svg') }}" id="btnFiltro" alt="Filtrar">
            </div>

            <div class="info-box" id="info-box">
                <h2>DADOS BIOGRÁFICOS</h2>
                <p>{{ vereador['biografia'] }}</p>
            </div>

            <div class="info-box" id="historico-box">
                <h2>HISTÓRICO POLÍTICO</h2>
                <p>{{ vereador['historico_politico'] }}</p>
            </div>
        </div>
    </div>

    <footer>
        <h4>developed by byte</h4>
    </footer>

    <script>
        function filtrarDados(tipo) {
            // Aqui você pode fazer uma requisição fetch para buscar dados filtrados
            fetch(`/perfil/filtros?vereador_id={{ vereador['id'] }}&filtro=${tipo}`)
                .then(response => response.json())
                .then(data => {
                    // Atualizar a área de informações com os dados recebidos
                    document.querySelector("#info-box").innerHTML = data.biografia;
                    document.querySelector("#historico-box").innerHTML = data.historico_politico;
                });
        }

        // Adiciona evento de clique nos filtros
        document.getElementById("btnFiltro").addEventListener("click", function() {
            const filtroSelecionado = document.getElementById("btnBusca").value;
            filtrarDados(filtroSelecionado);
        });
    </script>
{% endblock %}
